<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spanish Flashcards (Week 1)</title>

  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #0b0b0b;
      font-family: system-ui, -apple-system, "Helvetica Neue", Arial, sans-serif;
      color: #f3f3f3;
    }

    .wrap { width: min(92vw, 1100px); }

    .card {
      width: 100%;
      height: min(55vh, 520px);
      background: #141414;
      border-radius: 28px;
      box-shadow: 0 24px 60px rgba(0,0,0,0.45);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      cursor: pointer;
      user-select: none;
      border: 2px solid rgba(255,255,255,0.08);
      padding: 28px;
      position: relative;
      box-sizing: border-box;
    }

    .word {
      font-size: clamp(2.2rem, 5.5vw, 5.1rem);
      font-weight: 700;
      line-height: 1.08;
      letter-spacing: 0.2px;
    }

    .sub {
      margin-top: 14px;
      font-size: 1rem;
      opacity: 0.72;
      text-align: center;
    }

    .badge {
      position: absolute;
      top: 16px;
      right: 18px;
      font-size: 0.95rem;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      opacity: 0.95;
    }

    .controls {
      margin-top: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }

    button {
      background: #1f1f1f;
      color: #f3f3f3;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 14px;
      padding: 14px 18px;
      font-size: 1.02rem;
      font-weight: 700;
      cursor: pointer;
      min-width: 170px;
    }

    button:active { transform: translateY(1px); }

    .status {
      margin-top: 12px;
      font-size: 0.95rem;
      opacity: 0.8;
      text-align: center;
      line-height: 1.35;
    }

    .errorBox {
      margin-top: 14px;
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(255, 70, 70, 0.12);
      border: 1px solid rgba(255, 70, 70, 0.35);
      color: rgba(255,255,255,0.95);
      display: none;
      white-space: pre-wrap;
      font-size: 0.95rem;
    }

    .tiny {
      opacity: 0.7;
      font-size: 0.9rem;
      margin-top: 8px;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card" id="card" role="button" aria-label="Flashcard (click to flip)">
      <div class="badge" id="badge">EN → ES</div>
      <div>
        <div class="word" id="word">Loading…</div>
        <div class="sub" id="sub">If this stays stuck, tap “Reset App State”.</div>
      </div>
    </div>

    <div class="controls">
      <button id="prevBtn">Prev (←)</button>
      <button id="flipBtn">Flip (Space)</button>
      <button id="nextBtn">Next (→)</button>
      <button id="unknownBtn">Don’t know (U)</button>
      <button id="reviewUnknownBtn">Review Unknown (R)</button>
      <button id="clearUnknownBtn">Clear Unknown</button>
      <button id="resetBtn">Reset App State</button>
    </div>

    <div class="status" id="status"></div>
    <div class="errorBox" id="errorBox"></div>
    <div class="tiny">Keys: Space=flip · ←/→ navigate · U=toggle unknown · R=unknown-only · N/P deck</div>
  </div>

<script>
/* =========================
   SHOW ERRORS ON PAGE
   ========================= */
(function () {
  const errorBox = document.getElementById("errorBox");
  window.addEventListener("error", (e) => {
    errorBox.style.display = "block";
    errorBox.textContent =
      "JS ERROR:\n" +
      (e.message || "Unknown error") +
      "\n\n(Usually caused by a tiny typo in the vocab list.)";
  });
})();

/* =========================
   1) WEEK 1 VOCAB (EN → ES)
   Big, high-yield, advanced-ready.
   ========================= */
const ALL_CARDS = [
  // --- Academic / thinking verbs ---
  { en: "to realize", es: "darse cuenta" },
  { en: "to seem", es: "parecer" },
  { en: "to mean", es: "significar" },
  { en: "to depend on", es: "depender de" },
  { en: "to explain", es: "explicar" },
  { en: "to describe", es: "describir" },
  { en: "to define", es: "definir" },
  { en: "to interpret", es: "interpretar" },
  { en: "to analyze", es: "analizar" },
  { en: "to evaluate", es: "evaluar" },
  { en: "to consider", es: "considerar" },
  { en: "to suppose", es: "suponer" },
  { en: "to assume", es: "asumir" },
  { en: "to suggest", es: "sugerir" },
  { en: "to propose", es: "proponer" },
  { en: "to argue", es: "argumentar" },
  { en: "to support (an idea)", es: "apoyar" },
  { en: "to justify", es: "justificar" },
  { en: "to demonstrate", es: "demostrar" },
  { en: "to show", es: "mostrar" },
  { en: "to point out", es: "señalar" },
  { en: "to mention", es: "mencionar" },
  { en: "to refer to", es: "referirse a" },
  { en: "to conclude", es: "concluir" },
  { en: "to summarize", es: "resumir" },
  { en: "to compare", es: "comparar" },
  { en: "to contrast", es: "contrastar" },
  { en: "to emphasize", es: "enfatizar" },
  { en: "to clarify", es: "aclarar" },
  { en: "to affect", es: "afectar" },
  { en: "to influence", es: "influir en" },
  { en: "to improve", es: "mejorar" },
  { en: "to worsen", es: "empeorar" },
  { en: "to increase", es: "aumentar" },
  { en: "to reduce", es: "reducir" },
  { en: "to occur / to happen", es: "ocurrir" },
  { en: "to exist", es: "existir" },
  { en: "to achieve", es: "lograr" },
  { en: "to fail", es: "fracasar" },
  { en: "to succeed", es: "tener éxito" },
  { en: "to require", es: "requerir" },
  { en: "to allow", es: "permitir" },
  { en: "to prevent", es: "impedir" },
  { en: "to cause", es: "causar" },
  { en: "to result in", es: "resultar en" },
  { en: "to contribute", es: "contribuir" },
  { en: "to protect", es: "proteger" },

  // --- Abstract / academic nouns ---
  { en: "society", es: "la sociedad" },
  { en: "culture", es: "la cultura" },
  { en: "identity", es: "la identidad" },
  { en: "experience", es: "la experiencia" },
  { en: "opinion", es: "la opinión" },
  { en: "point of view", es: "el punto de vista" },
  { en: "change", es: "el cambio" },
  { en: "difference", es: "la diferencia" },
  { en: "similarity", es: "la semejanza" },
  { en: "effect", es: "el efecto" },
  { en: "cause", es: "la causa" },
  { en: "result", es: "el resultado" },
  { en: "importance", es: "la importancia" },
  { en: "development", es: "el desarrollo" },
  { en: "context", es: "el contexto" },
  { en: "process", es: "el proceso" },
  { en: "level", es: "el nivel" },
  { en: "system", es: "el sistema" },
  { en: "relationship", es: "la relación" },
  { en: "impact", es: "el impacto" },
  { en: "issue / topic", es: "el tema" },
  { en: "problem", es: "el problema" },
  { en: "challenge", es: "el desafío" },
  { en: "solution", es: "la solución" },
  { en: "evidence", es: "la evidencia" },
  { en: "research", es: "la investigación" },
  { en: "analysis", es: "el análisis" },
  { en: "perspective", es: "la perspectiva" },
  { en: "conclusion", es: "la conclusión" },
  { en: "example", es: "el ejemplo" },
  { en: "argument", es: "el argumento" },
  { en: "concept", es: "el concepto" },
  { en: "value", es: "el valor" },
  { en: "belief", es: "la creencia" },
  { en: "habit", es: "el hábito" },
  { en: "behavior", es: "el comportamiento" },
  { en: "goal", es: "la meta" },
  { en: "decision", es: "la decisión" },
  { en: "consequence", es: "la consecuencia" },

  // --- Logic connectors / discourse markers ---
  { en: "therefore", es: "por lo tanto" },
  { en: "however", es: "sin embargo" },
  { en: "although", es: "aunque" },
  { en: "despite", es: "a pesar de" },
  { en: "due to", es: "debido a" },
  { en: "in general", es: "en general" },
  { en: "for example", es: "por ejemplo" },
  { en: "in my opinion", es: "en mi opinión" },
  { en: "on the other hand", es: "por otro lado" },
  { en: "as a result", es: "como resultado" },
  { en: "in contrast", es: "en contraste" },
  { en: "in addition", es: "además" },
  { en: "furthermore", es: "además" },
  { en: "in fact", es: "de hecho" },
  { en: "in other words", es: "en otras palabras" },
  { en: "instead of", es: "en lugar de" },
  { en: "in order to", es: "con el fin de" },
  { en: "as long as", es: "siempre que" },
  { en: "even if", es: "incluso si" },
  { en: "nevertheless", es: "no obstante" },
  { en: "at least", es: "por lo menos" },
  { en: "especially", es: "especialmente" },
  { en: "for that reason", es: "por esa razón" },

  // --- High-utility adjectives (academic) ---
  { en: "necessary", es: "necesario/a" },
  { en: "possible", es: "posible" },
  { en: "likely", es: "probable" },
  { en: "complex", es: "complejo/a" },
  { en: "simple", es: "simple" },
  { en: "effective", es: "eficaz" },
  { en: "relevant", es: "relevante" },
  { en: "common", es: "común" },
  { en: "current", es: "actual" },
  { en: "significant", es: "significativo/a" },
  { en: "global", es: "global" },
  { en: "individual", es: "individual" },
  { en: "collective", es: "colectivo/a" },
  { en: "political", es: "político/a" },
  { en: "economic", es: "económico/a" },
  { en: "social", es: "social" },
  { en: "cultural", es: "cultural" },
  { en: "basic", es: "básico/a" },
  { en: "advanced", es: "avanzado/a" },
  { en: "important", es: "importante" },
  { en: "useful", es: "útil" },
  { en: "harmful", es: "perjudicial" },
  { en: "beneficial", es: "beneficioso/a" },

  // --- Classroom / discussion essentials ---
  { en: "to agree", es: "estar de acuerdo" },
  { en: "to disagree", es: "estar en desacuerdo" },
  { en: "to add", es: "añadir" },
  { en: "to participate", es: "participar" },
  { en: "to answer", es: "responder" },
  { en: "to ask", es: "preguntar" },
  { en: "to discuss", es: "discutir" },
  { en: "to debate", es: "debatir" },
  { en: "to present", es: "presentar" },
  { en: "to explain (again)", es: "explicar de nuevo" },
  { en: "to give an example", es: "dar un ejemplo" },
  { en: "to quote", es: "citar" },
  { en: "to read", es: "leer" },
  { en: "to write", es: "escribir" },
  { en: "to listen", es: "escuchar" },
  { en: "to understand", es: "entender" },
  { en: "to misunderstand", es: "malentender" },
  { en: "to remember", es: "recordar" },
  { en: "to forget", es: "olvidar" },

  // --- Time / frequency ---
  { en: "currently", es: "actualmente" },
  { en: "nowadays", es: "hoy en día" },
  { en: "in the past", es: "en el pasado" },
  { en: "in the future", es: "en el futuro" },
  { en: "at the same time", es: "al mismo tiempo" },
  { en: "over time", es: "con el tiempo" },
  { en: "from my perspective", es: "desde mi perspectiva" },
  { en: "often", es: "a menudo" },
  { en: "sometimes", es: "a veces" },
  { en: "rarely", es: "rara vez" },
  { en: "always", es: "siempre" },
  { en: "never", es: "nunca" },

  // --- Media & current events (intermediate→advanced baseline) ---
  { en: "news", es: "las noticias" },
  { en: "media", es: "los medios" },
  { en: "journalism", es: "el periodismo" },
  { en: "article", es: "el artículo" },
  { en: "report", es: "el reportaje" },
  { en: "headline", es: "el titular" },
  { en: "to report", es: "informar" },
  { en: "to investigate", es: "investigar" },
  { en: "to publish", es: "publicar" },
  { en: "to censor", es: "censurar" },

  // --- Social issues / civic words (advanced class staples) ---
  { en: "rights", es: "los derechos" },
  { en: "human rights", es: "los derechos humanos" },
  { en: "equality", es: "la igualdad" },
  { en: "inequality", es: "la desigualdad" },
  { en: "justice", es: "la justicia" },
  { en: "freedom", es: "la libertad" },
  { en: "violence", es: "la violencia" },
  { en: "poverty", es: "la pobreza" },
  { en: "education", es: "la educación" },
  { en: "health", es: "la salud" },
  { en: "environment", es: "el medio ambiente" },
  { en: "climate change", es: "el cambio climático" },
  { en: "to reduce pollution", es: "reducir la contaminación" },
  { en: "to recycle", es: "reciclar" },

  // --- Useful “test writing” verbs ---
  { en: "to claim", es: "afirmar" },
  { en: "to deny", es: "negar" },
  { en: "to admit", es: "admitir" },
  { en: "to emphasize", es: "destacar" },
  { en: "to point out", es: "señalar" },
  { en: "to conclude", es: "concluir" }
];

/* =========================
   2) SETTINGS
   ========================= */
const DECK_SIZE = 200;

// localStorage keys
const LS_DECK = "deckIndex";
const LS_UNKNOWN = "unknownCards_v2";
const LS_REVIEW_UNKNOWN = "reviewUnknownOnly_v2";

/* =========================
   HELPERS
   ========================= */
function cardKey(card) { return `${card.en}|||${card.es}`; }

function loadUnknownSet() {
  try { return new Set(JSON.parse(localStorage.getItem(LS_UNKNOWN) || "[]")); }
  catch { return new Set(); }
}
function saveUnknownSet(setObj) {
  localStorage.setItem(LS_UNKNOWN, JSON.stringify(Array.from(setObj)));
}
function maxDeckIndex() {
  return Math.max(0, Math.floor((ALL_CARDS.length - 1) / DECK_SIZE));
}
function getDeckSlice(deckIndex) {
  const start = deckIndex * DECK_SIZE;
  return ALL_CARDS.slice(start, start + DECK_SIZE);
}

/* =========================
   STATE
   ========================= */
let deckIndex = parseInt(localStorage.getItem(LS_DECK) || "0", 10);
let unknownSet = loadUnknownSet();
let reviewUnknownOnly = (localStorage.getItem(LS_REVIEW_UNKNOWN) || "0") === "1";

let showingSpanish = false; // EN first
let index = 0;

let baseDeck = getDeckSlice(deckIndex);
let activeDeck = [];

/* =========================
   ELEMENTS
   ========================= */
const wordEl = document.getElementById("word");
const subEl = document.getElementById("sub");
const statusEl = document.getElementById("status");
const badgeEl = document.getElementById("badge");
const cardEl = document.getElementById("card");

const prevBtn = document.getElementById("prevBtn");
const flipBtn = document.getElementById("flipBtn");
const nextBtn = document.getElementById("nextBtn");
const unknownBtn = document.getElementById("unknownBtn");
const reviewUnknownBtn = document.getElementById("reviewUnknownBtn");
const clearUnknownBtn = document.getElementById("clearUnknownBtn");
const resetBtn = document.getElementById("resetBtn");

/* =========================
   RENDER
   ========================= */
function getActiveDeck() {
  if (!reviewUnknownOnly) return baseDeck;
  return baseDeck.filter(c => unknownSet.has(cardKey(c)));
}

function currentCard() {
  if (!activeDeck.length) return null;
  return activeDeck[index];
}

function updateStatus() {
  const totalDecks = maxDeckIndex() + 1;
  const deckStart = deckIndex * DECK_SIZE + 1;
  const deckEnd = Math.min((deckIndex + 1) * DECK_SIZE, ALL_CARDS.length);
  const unknownCount = baseDeck.filter(c => unknownSet.has(cardKey(c))).length;

  statusEl.textContent =
    `Deck ${deckIndex + 1}/${totalDecks} · Card ${activeDeck.length ? (index + 1) : 0}/${activeDeck.length} · ` +
    `${reviewUnknownOnly ? "MODE: Unknown only" : "MODE: All cards"} · ` +
    `Unknown in this deck: ${unknownCount} · Words ${deckStart}-${deckEnd} · Total cards: ${ALL_CARDS.length}`;
}

function render() {
  baseDeck = getDeckSlice(deckIndex);
  activeDeck = getActiveDeck();

  if (!activeDeck.length) {
    wordEl.textContent = reviewUnknownOnly
      ? "No unknown cards in this deck"
      : "No cards in this deck";
    subEl.textContent = reviewUnknownOnly
      ? "Press R to exit Unknown mode, or mark some cards as unknown (U)."
      : "Check your ALL_CARDS list.";
    badgeEl.textContent = reviewUnknownOnly ? "Unknown only" : "EN → ES";
    updateStatus();
    return;
  }

  index = Math.max(0, Math.min(index, activeDeck.length - 1));
  const c = currentCard();
  const isUnknown = unknownSet.has(cardKey(c));

  wordEl.textContent = showingSpanish ? c.es : c.en;
  subEl.textContent = showingSpanish ? "Spanish" : "English";
  badgeEl.textContent = isUnknown ? "UNKNOWN" : (reviewUnknownOnly ? "Unknown only" : "EN → ES");

  updateStatus();
}

/* =========================
   ACTIONS
   ========================= */
function flip() {
  showingSpanish = !showingSpanish;
  render();
}
function nextCard() {
  if (!activeDeck.length) return;
  index = (index + 1) % activeDeck.length;
  showingSpanish = false;
  render();
}
function prevCard() {
  if (!activeDeck.length) return;
  index = (index - 1 + activeDeck.length) % activeDeck.length;
  showingSpanish = false;
  render();
}
function toggleUnknown() {
  const c = currentCard();
  if (!c) return;
  const k = cardKey(c);
  if (unknownSet.has(k)) unknownSet.delete(k);
  else unknownSet.add(k);
  saveUnknownSet(unknownSet);
  render();
}
function toggleReviewUnknownOnly() {
  reviewUnknownOnly = !reviewUnknownOnly;
  localStorage.setItem(LS_REVIEW_UNKNOWN, reviewUnknownOnly ? "1" : "0");
  index = 0;
  showingSpanish = false;
  render();
}
function clearUnknown() {
  if (!confirm("Clear ALL 'unknown' marks?")) return;
  unknownSet = new Set();
  saveUnknownSet(unknownSet);
  index = 0;
  showingSpanish = false;
  render();
}
function loadDeck(newDeckIndex) {
  deckIndex = Math.max(0, Math.min(newDeckIndex, maxDeckIndex()));
  localStorage.setItem(LS_DECK, String(deckIndex));
  index = 0;
  showingSpanish = false;
  render();
}
function resetAppState() {
  if (!confirm("Reset app state (unknown marks + mode + deck)?")) return;
  localStorage.removeItem(LS_UNKNOWN);
  localStorage.removeItem(LS_REVIEW_UNKNOWN);
  localStorage.removeItem(LS_DECK);
  unknownSet = new Set();
  reviewUnknownOnly = false;
  deckIndex = 0;
  index = 0;
  showingSpanish = false;
  render();
}

/* =========================
   EVENTS
   ========================= */
cardEl.addEventListener("click", flip);
flipBtn.addEventListener("click", flip);
nextBtn.addEventListener("click", nextCard);
prevBtn.addEventListener("click", prevCard);
unknownBtn.addEventListener("click", toggleUnknown);
reviewUnknownBtn.addEventListener("click", toggleReviewUnknownOnly);
clearUnknownBtn.addEventListener("click", clearUnknown);
resetBtn.addEventListener("click", resetAppState);

document.addEventListener("keydown", (e) => {
  if (e.code === "Space") { e.preventDefault(); flip(); }
  if (e.key === "ArrowRight") nextCard();
  if (e.key === "ArrowLeft") prevCard();
  if (e.key.toLowerCase() === "u") toggleUnknown();
  if (e.key.toLowerCase() === "r") toggleReviewUnknownOnly();
  if (e.key.toLowerCase() === "n") loadDeck(deckIndex + 1);
  if (e.key.toLowerCase() === "p") loadDeck(deckIndex - 1);
});

/* =========================
   START
   ========================= */
render();
</script>
</body>
</html>


